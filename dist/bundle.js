!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(module,__webpack_exports__,__webpack_require__){"use strict";async function parse(ch,element){ch.flags.indexOf("async")>=0?await eval(ch.content):eval(ch.content)}const js_parser={types:["js","javascript","java-script"],parse:parse};__webpack_exports__.a=js_parser},function(e,t,n){"use strict";n.r(t);class r{constructor(){this.chunks=[],this.tail=[],this.current=null,this.line=0,this.index=0}commit(){const e=this.current;e.commit(),this.chunks.push(e),this.current=null}addLines(e){this.current.addLines(e),this.line+=e.length;for(const t of e)this.index+=t.length+1}}class i{constructor(e,t,n,r){this.type=e,this.flags=t,this.index=n,this.startLine=r,this.endLine=r,this.content="",this.lines=[]}addLines(e){this.lines.push(...e),this.endLine+=e.length}commit(){this.content=this.lines.join("\n"),this.lines=[]}}function s(e,t,n=!0){const r=t.split("\n");let s=[];return r.forEach((function(t){if("%%"===t.slice(0,2)){s.length&&!e.current&&(e.current=new i("",[],0,0)),e.current&&(e.addLines(s),e.commit(),s=[]);let n=0;for(;"%"===t[n];)n+=1;const r=t.slice(n).split(/[ \t]+/).filter(e=>""!==e);e.current=new i(r[0],r.slice(1),e.index,e.line),e.index+=t.length+1}else s.push(t)})),n?(e.addLines(s),e.commit(),e.tail=[]):e.tail.push(...s),e}const o={};o.ParserState=r,o.Chunk=i,o.parseLines=s,o.parse=function(e){return s(new r,e,!0).chunks};var a=o;var l={types:["css"],parse:async function(e,t){let n=document.createElement("style");n.appendChild(document.createTextNode(e.content)),t.appendChild(n)}},c=n(0);async function d(e){let t=e.indexOf(":");if(t<0)return;let n=e.slice(0,t).trim(),r=e.slice(t+1,e.length).trim();if(n&&r)switch(n){case"js":await async function(e){return new Promise((t,n)=>{let r=document.createElement("script");document.head.appendChild(r),r.src=e,r.async=!1,r.onload=t,r.onerror=n})}(r);break;case"py":await async function(e){return await languagePluginLoader,pyodide.loadPackage([e])}(r);break;case"text":await async function(e){let t=e.indexOf("=");if(t<0)return;let n=e.slice(0,t).trim(),r=e.slice(t+1,e.length).trim();if(r.startsWith("http")||(r=lite_notebook.root+"/"+r),n&&r){let e=await fetch(r);self[n]=await e.text()}}(r)}}var u={types:["fetch"],parse:async function(e,t){let n=e.content.split("\n");for(let e=0;e<n.length;e++){let t=n[e].trim();t&&await d(t)}}};let p=null;var h={types:["md"],parse:async function(e,t){if(!p){p=new marked.Renderer;const e=p.link.bind(p),t=p.image.bind(p);p.link=(t,n,r)=>{t.startsWith("http")||(t=lite_notebook.root+"/"+t);let i=e(t,n,r);return i=i.replace("<a","<a target='_blank'"),i},p.image=(e,n,r)=>(e.startsWith("http")||(e=lite_notebook.root+"/"+e),t(e,n,r))}let n=document.createElement("div");n.innerHTML=marked(e.content,{renderer:p}),n.classList&&n.classList.add("user-markdown"),t.appendChild(n)}};var f={types:["editor","code","ace"],parse:async function(e,t){let n=document.createElement("div");n.innerText=e.content;let r=null;for(let t=0;t<e.flags.length;t++){let i=e.flags[t];if(i.startsWith("id")){let e=i.indexOf("=");if(e<0)continue;r=n.id=i.slice(e+1,i.length).trim()}}t.appendChild(n);const i=ace.edit(r);i.getSession().setMode("ace/mode/python"),i.setOptions({maxLines:60,minLines:20})}};const m=[l,c.a,u,h,f];const y={v:"0.0.5",root:"",hierarchy:{},screen:null,workerURL:"dist/worker.js",elements:{code_output:function(){let e=document.createElement("div");e.classList.add("code-output");let t=document.createElement("div");t.classList.add("code-btn-container"),e.appendChild(t);let n=document.createElement("div");n.classList.add("code-btn","code-btn-play"),t.appendChild(n);let r=document.createElement("div");r.classList.add("code-btn","code-btn-clear"),t.appendChild(r);let i=document.createElement("div");return i.classList.add("code-output-text"),e.appendChild(i),n.addEventListener("click",()=>e.dispatchEvent(new Event("onPlay"))),r.addEventListener("click",()=>e.dispatchEvent(new Event("onClear"))),e.py_worker=null,e.output=i,e.pre_codes=[],e.after_codes=[],e.before_launch=()=>null,e.attachEditor=t=>{e.addEventListener("onPlay",()=>{if(e.py_worker)i.innerText+="process finished by user\n",i.scrollTop=i.scrollHeight,e.py_worker.terminate(),e.py_worker=null,n.classList.remove("code-btn-stop"),n.classList.add("code-btn-play");else{e.py_worker=lite_notebook.pyWorker,e.before_launch instanceof Function&&e.before_launch(),e.py_worker.addEventListener("print",e=>{let t=e.message.join(" ");t=t.replace(/\\n/g,"<br>")+"\n",i.innerText+=t,i.scrollTop=i.scrollHeight});let r=[...e.pre_codes,t.getValue(),...e.after_codes].join("\n\n");e.py_worker.run(r,t=>{i.innerText+="process finished\n",i.scrollTop=i.scrollHeight,e.py_worker.terminate(),e.py_worker=null,n.classList.remove("code-btn-stop"),n.classList.add("code-btn-play")},t=>{i.innerText+=t.replace(/\\n/g,"<br>")+"\n",i.scrollTop=i.scrollHeight,e.py_worker.terminate(),e.py_worker=null,n.classList.remove("code-btn-stop"),n.classList.add("code-btn-play")}),n.classList.remove("code-btn-play"),n.classList.add("code-btn-stop"),i.innerText+="run...\n",i.scrollTop=i.scrollHeight}}),e.addEventListener("onClear",()=>i.innerText="")},e}},load_hierarchy:async function(e){let t=await fetch(e),n=await t.text();if(!n)throw new Error("Error. no hierarchy file!");{y.hierarchy=JSON.parse(n);let e=new URL(window.location.href).searchParams.get("page")||"notebooks";await async function(){let e=window.location.href.split("?")[0],t=document.getElementById("menu");t.innerHTML="";let n=(r,i,s)=>{let o=document.createElement("p");o.style.paddingLeft=12*i+"px",o.innerText=r.name,o.classList.add("menu-elem"),t.appendChild(o);let a=s+r.src;o.onclick=()=>window.location.href=`${e}?page=${a}`,o.setAttribute("path",a);for(let e=0;e<r.children.length;e++)n(r.children[e],i+1,a+"/")};n(y.hierarchy,1,"")}(),await async function e(t){let{node:n,root:r}=await async function(e){let t=e.split("/"),n=y.hierarchy,r=[n.src],i=0;for(;n.src===t[i]&&(i++,i<t.length);){let e=t[i],s=n.children.find(t=>t.src===e);if(!s)break;n=s,r.push(n.src)}return{node:n,root:r.join("/")}}(t);if(n){let e=document.getElementById("menu").getElementsByClassName("menu-elem");for(let n=0;n<e.length;n++){let r=e[n];r.getAttribute("path")===t?r.classList.add("active"):r.classList.remove("active")}document.title=n.name;let i=window.location.href.split("?")[0];window.history.pushState(null,null,`${i}?page=${r}`),y.root=r,y.screen=document.getElementById("screen"),y.screen.innerHTML="";let s=await fetch(r+"/notebook"),o=await s.text();await async function(e,t){let n=a.parse(e);for(let e=0;e<n.length;e++){let r=n[e];if(!r.type)continue;let i=r.type.trim().toLowerCase(),s=m.find(e=>e.types.indexOf(i)>=0);s&&await s.parse(r,t)}}(o,y.screen),await MathJax.typesetPromise()}else await e("notebooks")}(e)}},get pyWorker(){return e=y.workerURL,{worker:new Worker(e),listeners:[],context:{variables:{lite_notebook:lite_notebook.v},events:["print"]},addVariable(e,t){this.context.variables[e]=t},addFunction(e){this.context.events.push(e)},addEventListener(e,t){this.listeners.push({type:e,listener:t})},run(e,t,n){this.worker.onerror=n,this.worker.onmessage=e=>{const{error:r}=e.data;for(let t=0;t<this.listeners.length;t++)if(e.data.type===this.listeners[t].type)try{this.listeners[t].listener(e.data)}catch(e){console.error(e.message)}"end"===e.data.type&&t(e.data),r&&n(r)},this.worker.postMessage({context:this.context,python:e})},terminate(){this.worker.terminate()}};var e}};window.lite_notebook=y}]);